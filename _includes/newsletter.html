<!-- Go to your Mailchimp account/Lists/Sign Up Forms/Embedded forms and replace the code below with your own  -->
<div id="whatsapp-signup">
  <form id="whatsapp-form" class="needs-validation" novalidate>
    <div id="whatsapp-signup-scroll">
      <h2 class="mb-3">Join WhatsApp Group!</h2>
      <p class="lead mb-4">Get instant updates and connect with the community.</p>

      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon1">+91</span>
        </div>
        <input type="tel" value="" name="WHATSAPP" class="form-control" id="whatsapp-number" placeholder="Enter your 10-digit number" required pattern="[0-9]{10}" title="Please enter a valid 10-digit number">
      </div>
      
      <input type="hidden" id="reference-url" value="">

      <div class="clear">
        <input type="submit" value="Join Now" name="subscribe" id="whatsapp-subscribe-button" class="btn btn-success btn-block">
      </div>
    </div>
  </form>
</div>

<script type='text/javascript'>
  document.addEventListener("DOMContentLoaded", function() {
    // Set the value of the hidden URL field
    document.getElementById('reference-url').value = window.location.href;

    const form = document.getElementById('whatsapp-form');
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Stop the form from submitting the traditional way
      event.stopPropagation();

      if (form.checkValidity() === true) {
        // Get the phone number and reference URL from the form
        const phoneNumber = document.getElementById('whatsapp-number').value;
        const refUrl = document.getElementById('reference-url').value;
        
        // Construct the message
        const message = `Please add me in the WhatsApp group. (From: ${refUrl})`;
        
        // Encode the message for the URL
        const encodedMessage = encodeURIComponent(message);
        
        // Construct the final WhatsApp URL
        const whatsappUrl = `https://api.whatsapp.com/send?phone=919103189498&text=${encodedMessage}`;
        
        // Redirect the user
        window.open(whatsappUrl, '_blank');
      }

      form.classList.add('was-validated');
    }, false);
  });
</script>
<!--End mc_embed_signup-->
